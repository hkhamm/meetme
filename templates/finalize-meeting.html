<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html lang="en"> <head>
<title>MeetMe | Finalize Meeting</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css"
     href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.css"
/>

<link rel="stylesheet" type="text/css"
 href="/static/css/daterangepicker.css"
/>

<link rel="stylesheet" type="text/css"
    href="/static/css/busy.css"
/>

<!-- jquery from a content distribution network; probably cached -->
<script type="text/javascript"
     src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
</script>

<!-- Moment from a content distribution network (CDN) -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js">
</script>

<!-- Bootstrap Date Range Picker from a content distribution network (CDN) -->
<script type="text/javascript"
        src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js">
</script>

</head>

<body>
<div class="container">

<!--
If there are any warnings or other messages from a prior action,
they appear above the rest of the content, just until the next
action.
  -->

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<div class="page-header">
  <h2>MeetMe <small>Choose a Meeting Time</small></h2>
</div>

<ul>
  <li>
    You may select one of the following meeting times. These are created from
    all submitted calendar events.
  </li>
  <li>
    At the bottom of the page you may click the
    <span class="bold">Delete Meeting Proposal</span>
    button to destroy the entire proposal. This removes all submitted events
    and redirects you to the Create Meeting Proposal page.
  </li>
</ul>


{# Shows the possible meeting times #}
{% if session.meeting_times is defined %}
  <form action="{{ url_for('set_meeting_time') }}" method="post">
    <label for="meeting_times">Meeting Times</label>
    <div class="form-group">
      <select class="form-control" id="meeting_times" name="meeting_times">
        {% for time in session.meeting_times %}
          <option>
            {{ time.start.dateTime | fmttime }} -
            {{ time.end.dateTime | fmtdatetime }}
          </option>
        {% endfor %}
      </select>
    </div>
    <button class="btn btn-default" id="add-button" type="submit">
      Choose
    </button>
  </form>

  <hr>

{#  <ul>#}
{#    <li>#}
{#      You may send a link with your chosen meeting time to this proposed#}
{#      meeting's participants by adding their email addresses using the form#}
{#      below. Then, you may modify and send the message.#}
{#    </li>#}
{#    <li>#}
{#      <span class="bold">WARNING:</span> You must either be on campus or#}
{#      connected to the <a href="https://uovpn.uoregon.edu/">UO VPN</a> to send#}
{#      mail with this form!#}
{#    </li>#}
{#    <li>#}
{#      Alternately, you may copy time and email it yourself. The time will#}
{#      appear below if you select the Choose button.#}
{#    </li>#}
{#  </ul>#}
{##}

  {% if session.meeting_time is defined %}
    <p><span class="bold">Chosen time:</span> {{ session.meeting_time }}</p>
    <hr>
  {% endif %}

{##}
{#  <form action="{{ url_for('add_recipient') }}" method="post">#}
{#    <label for="add-recipient">Add Recipient</label>#}
{#    <div id="add-recipient">#}
{#      <div class="form-group">#}
{#        <input type="text" class="form-control" id="recipient_address"#}
{#               name="recipient_address" placeholder="Address"/>#}
{#      </div>#}
{#      <button class="btn btn-default" id="add-button" type="submit">#}
{#          Add Recipient#}
{#      </button>#}
{#    </div>#}
{#  </form>#}
{##}
{#  {% if session.recipients %}#}
{#    <label for="recipients">Recipients</label>#}
{#    <div id="recipients">#}
{#      {% for recipient in session.recipients %}#}
{#        <form action="{{ url_for('remove_recipient') }}" method="post">#}
{#          <div class="row" id="recipient">#}
{#            <div class="col-md-4">#}
{#              <input class="form-control" type="text" value="{{ recipient }}"#}
{#                     id="recipient_address" name="recipient_address" readonly>#}
{#            </div>#}
{#            <button class="btn btn-default" id="remove-button" type="submit"#}
{#                    name="remove-button">#}
{#                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>#}
{#            </button>#}
{#          </div>#}
{#        </form>#}
{#      {% endfor %}#}
{#    </div>#}

{#    <form action="{{ url_for('send_mail') }}" method="post">#}
{#      <div class="form-group">#}
{#        <label for="message-body">Subject</label>#}
{#        <input type="text" id="subject" name="subject" class="form-control"#}
{#               value="MeetMe: Meeting time selected">#}
{#      </div>#}
{#      <div class="form-group">#}
{#        <label for="message-body">Message</label>#}
{#<textarea class="form-control" rows="6" id="message-body" name="message-body">#}
{#The meeting proposer has chosen a meeting time:#}
{#{% if session.meeting_time is defined %}#}
{#{{ session.meeting_time }}#}
{#{% endif %}#}
{#</textarea>#}
{#      </div>#}
{#      <button class="btn btn-default" id="send-mail" type="submit">#}
{#          Send#}
{#      </button>#}
{#    </form>#}
{#    <hr>#}
{#  {% endif %}#}
{% endif %}

<form action="{{ url_for('destroy_proposal') }}" method="post">
  <button type="submit" class="btn btn-danger">
    Delete Meeting Proposal
  </button>
</form>

</div>  <!-- container (for bootstrap) -->
</body>
</html>
